{% extends "layouts/base.html" %}
{% from 'helpers/_forms.html' import render_field %}

{% block title %} Edit Deploy {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}
{% block content %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<main class="content">
    {% include 'includes/navigation.html' %}

    <div class="py-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent">
                <li class="breadcrumb-item"><a href="#"><span class="fas fa-home"></span></a></li>
                <li class="breadcrumb-item"><a href="/deploys-list">Deploy</a></li>
            </ol>
        </nav>

        <!-- Contenedor para mostrar los datos de SSE -->
        <div id="sse-data-container">
            <h2>Deployment Output:</h2>
            <pre id="sse-data"></pre>
        </div>
    </div>


                {% include 'includes/footer.html' %}

</main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>
    const eventSource = new EventSource('/stream');
    eventSource.onmessage = function(e) {
        console.log(e.data);
        // Actualiza el contenido del elemento con el ID 'sse-data'
        document.getElementById('sse-data').textContent += e.data + '\n';
    };
</script>
{% endblock javascripts %}